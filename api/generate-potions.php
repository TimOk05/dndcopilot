<?php
/**
 * API Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð·ÐµÐ»Ð¸Ð¹ D&D
 * Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ð·ÐµÐ»ÑŒÑ Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ñ‚Ð¸Ð¿Ð¾Ð² Ð¸ Ñ€ÐµÐ´ÐºÐ¾ÑÑ‚Ð¸
 */

header('Content-Type: application/json; charset=utf-8');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST, OPTIONS');
header('Access-Control-Allow-Headers: Content-Type');

if ($_SERVER['REQUEST_METHOD'] === 'OPTIONS') {
    exit(0);
}

class PotionGenerator {
    private $potions = [
        'common' => [
            'Ð—ÐµÐ»ÑŒÐµ Ð»ÐµÑ‡ÐµÐ½Ð¸Ñ' => [
                'description' => 'Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ 2d4+2 Ñ…Ð¸Ñ‚Ð¾Ð²',
                'rarity' => 'ÐžÐ±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ',
                'value' => '50 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð¿Ñ€Ñ‹Ð³ÑƒÑ‡ÐµÑÑ‚Ð¸' => [
                'description' => 'Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ Ð¿Ñ€Ñ‹Ð¶Ð¾Ðº Ð² 3 Ñ€Ð°Ð·Ð° Ð½Ð° 1 Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ',
                'rarity' => 'ÐžÐ±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ðµ',
                'value' => '50 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ñ Ð¾Ð³Ð½ÑŽ' => [
                'description' => 'Ð”Ð°ÐµÑ‚ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ðµ Ðº Ð¾Ð³Ð½ÐµÐ½Ð½Ð¾Ð¼Ñƒ ÑƒÑ€Ð¾Ð½Ñƒ Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐžÐ±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð—Ð°Ñ‰Ð¸Ñ‚Ð°',
                'value' => '50 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ñ Ñ…Ð¾Ð»Ð¾Ð´Ñƒ' => [
                'description' => 'Ð”Ð°ÐµÑ‚ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ðµ Ðº Ñ…Ð¾Ð»Ð¾Ð´Ð½Ð¾Ð¼Ñƒ ÑƒÑ€Ð¾Ð½Ñƒ Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐžÐ±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð—Ð°Ñ‰Ð¸Ñ‚Ð°',
                'value' => '50 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐ»ÐµÐºÑ‚Ñ€Ð¸Ñ‡ÐµÑÑ‚Ð²Ñƒ' => [
                'description' => 'Ð”Ð°ÐµÑ‚ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ðµ Ðº ÑÐ»ÐµÐºÑ‚Ñ€Ð¸Ñ‡ÐµÑÐºÐ¾Ð¼Ñƒ ÑƒÑ€Ð¾Ð½Ñƒ Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐžÐ±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð—Ð°Ñ‰Ð¸Ñ‚Ð°',
                'value' => '50 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ ÑÑÐ½Ð¾Ð²Ð¸Ð´ÐµÐ½Ð¸Ñ' => [
                'description' => 'ÐŸÐ¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ð² Ñ‚ÐµÐ¼Ð½Ð¾Ñ‚Ðµ Ð½Ð° 60 Ñ„ÑƒÑ‚Ð¾Ð² Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐžÐ±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'ÐŸÑ€Ð¾Ñ€Ð¸Ñ†Ð°Ð½Ð¸Ðµ',
                'value' => '50 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð²Ñ‹Ð½Ð¾ÑÐ»Ð¸Ð²Ð¾ÑÑ‚Ð¸' => [
                'description' => 'Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ Ð²Ñ‹Ð½Ð¾ÑÐ»Ð¸Ð²Ð¾ÑÑ‚ÑŒ Ð½Ð° 1d4+1 Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐžÐ±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ðµ',
                'value' => '50 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ]
        ],
        'uncommon' => [
            'Ð—ÐµÐ»ÑŒÐµ Ð½ÐµÐ²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸' => [
                'description' => 'Ð”ÐµÐ»Ð°ÐµÑ‚ Ð½ÐµÐ²Ð¸Ð´Ð¸Ð¼Ñ‹Ð¼ Ð½Ð° 1 Ñ‡Ð°Ñ Ð¸Ð»Ð¸ Ð´Ð¾ Ð°Ñ‚Ð°ÐºÐ¸',
                'rarity' => 'ÐÐµÐ¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð˜Ð»Ð»ÑŽÐ·Ð¸Ñ',
                'value' => '100 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð¿Ð¾Ð»ÐµÑ‚Ð°' => [
                'description' => 'ÐŸÐ¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð»ÐµÑ‚Ð°Ñ‚ÑŒ ÑÐ¾ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒÑŽ 60 Ñ„ÑƒÑ‚Ð¾Ð² Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐÐµÐ¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð¢Ñ€Ð°Ð½ÑÐ¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ',
                'value' => '100 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð³Ð¸Ð³Ð°Ð½Ñ‚ÑÐºÐ¾Ð¹ ÑÐ¸Ð»Ñ‹' => [
                'description' => 'Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ ÑÐ¸Ð»Ñƒ Ð´Ð¾ 21 Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐÐµÐ¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ðµ',
                'value' => '100 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐ´Ñƒ' => [
                'description' => 'Ð”Ð°ÐµÑ‚ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ðµ Ðº ÑÐ´Ð¾Ð²Ð¸Ñ‚Ð¾Ð¼Ñƒ ÑƒÑ€Ð¾Ð½Ñƒ Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐÐµÐ¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð—Ð°Ñ‰Ð¸Ñ‚Ð°',
                'value' => '100 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸' => [
                'description' => 'Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ð½Ð° 10 Ñ„ÑƒÑ‚Ð¾Ð² Ð½Ð° 1 Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ',
                'rarity' => 'ÐÐµÐ¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ðµ',
                'value' => '100 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð¿Ð¾Ð½Ð¸Ð¼Ð°Ð½Ð¸Ñ ÑÐ·Ñ‹ÐºÐ¾Ð²' => [
                'description' => 'ÐŸÐ¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð¿Ð¾Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ Ð²ÑÐµ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð½Ñ‹Ðµ ÑÐ·Ñ‹ÐºÐ¸ Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐÐµÐ¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'ÐŸÑ€Ð¾Ñ€Ð¸Ñ†Ð°Ð½Ð¸Ðµ',
                'value' => '100 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð°' => [
                'description' => 'Ð£Ð¼ÐµÐ½ÑŒÑˆÐ°ÐµÑ‚ Ð¸Ð»Ð¸ ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ð² 2 Ñ€Ð°Ð·Ð° Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐÐµÐ¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ',
                'type' => 'Ð¢Ñ€Ð°Ð½ÑÐ¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ',
                'value' => '100 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ]
        ],
        'rare' => [
            'Ð—ÐµÐ»ÑŒÐµ Ð²ÐµÐ»Ð¸ÐºÐ¾Ð³Ð¾ Ð»ÐµÑ‡ÐµÐ½Ð¸Ñ' => [
                'description' => 'Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ 8d4+8 Ñ…Ð¸Ñ‚Ð¾Ð²',
                'rarity' => 'Ð ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ',
                'value' => '500 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð´Ð¾Ð»Ð³Ð¾Ð»ÐµÑ‚Ð¸Ñ' => [
                'description' => 'Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ Ð½Ð° 1d6+6 Ð»ÐµÑ‚',
                'rarity' => 'Ð ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'Ð¢Ñ€Ð°Ð½ÑÐ¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ',
                'value' => '500 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°Ð³Ð¸Ð¸' => [
                'description' => 'Ð”Ð°ÐµÑ‚ Ð¿Ñ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð¾ Ðº ÑÐ¿Ð°ÑÐ±Ñ€Ð¾ÑÐºÐ°Ð¼ Ð¾Ñ‚ Ð·Ð°ÐºÐ»Ð¸Ð½Ð°Ð½Ð¸Ð¹ Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'Ð ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'Ð—Ð°Ñ‰Ð¸Ñ‚Ð°',
                'value' => '500 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð½ÐµÑƒÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚Ð¸' => [
                'description' => 'Ð”Ð°ÐµÑ‚ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾ Ð²ÑÐµÐ¼ Ð²Ð¸Ð´Ð°Ð¼ ÑƒÑ€Ð¾Ð½Ð° Ð½Ð° 1 Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ',
                'rarity' => 'Ð ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'Ð—Ð°Ñ‰Ð¸Ñ‚Ð°',
                'value' => '500 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð³ÐµÑ€Ð¾Ð¸Ð·Ð¼Ð°' => [
                'description' => 'Ð”Ð°ÐµÑ‚ Ð¸Ð¼Ð¼ÑƒÐ½Ð¸Ñ‚ÐµÑ‚ Ðº ÑÑ‚Ñ€Ð°Ñ…Ñƒ Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ…Ð¸Ñ‚Ñ‹ Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'Ð ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ðµ',
                'value' => '500 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ']
            ]
        ],
        'very_rare' => [
            'Ð—ÐµÐ»ÑŒÐµ Ð¸ÑÑ‚Ð¸Ð½Ð½Ð¾Ð³Ð¾ Ð²Ð¾ÑÐºÑ€ÐµÑˆÐµÐ½Ð¸Ñ' => [
                'description' => 'Ð’Ð¾ÑÐºÑ€ÐµÑˆÐ°ÐµÑ‚ Ð¼ÐµÑ€Ñ‚Ð²Ð¾Ð³Ð¾ ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð° Ñ Ð¿Ð¾Ð»Ð½Ñ‹Ð¼ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼',
                'rarity' => 'ÐžÑ‡ÐµÐ½ÑŒ Ñ€ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'ÐÐµÐºÑ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸Ñ',
                'value' => '50000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð±ÐµÑÑÐ¼ÐµÑ€Ñ‚Ð¸Ñ' => [
                'description' => 'Ð”ÐµÐ»Ð°ÐµÑ‚ ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾ Ð½ÐµÑƒÑÐ·Ð²Ð¸Ð¼Ñ‹Ð¼ Ðº ÑÑ‚Ð°Ñ€ÐµÐ½Ð¸ÑŽ Ð½Ð° 100 Ð»ÐµÑ‚',
                'rarity' => 'ÐžÑ‡ÐµÐ½ÑŒ Ñ€ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'Ð¢Ñ€Ð°Ð½ÑÐ¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ',
                'value' => '50000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ð¾Ð¹ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹' => [
                'description' => 'Ð”Ð°ÐµÑ‚ Ð¸Ð¼Ð¼ÑƒÐ½Ð¸Ñ‚ÐµÑ‚ ÐºÐ¾ Ð²ÑÐµÐ¼ Ð²Ð¸Ð´Ð°Ð¼ ÑƒÑ€Ð¾Ð½Ð° Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐžÑ‡ÐµÐ½ÑŒ Ñ€ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'Ð—Ð°Ñ‰Ð¸Ñ‚Ð°',
                'value' => '50000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð²ÑÐµÐ²ÐµÐ´ÐµÐ½Ð¸Ñ' => [
                'description' => 'Ð”Ð°ÐµÑ‚ Ð·Ð½Ð°Ð½Ð¸Ðµ Ð²ÑÐµÑ… ÑÐ·Ñ‹ÐºÐ¾Ð² Ð¸ Ð¿Ð¾Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ð²ÑÐµÑ… ÑÑƒÑ‰ÐµÑÑ‚Ð² Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐžÑ‡ÐµÐ½ÑŒ Ñ€ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'ÐŸÑ€Ð¾Ñ€Ð¸Ñ†Ð°Ð½Ð¸Ðµ',
                'value' => '50000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð±Ð¾Ð¶ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð¹ ÑÐ¸Ð»Ñ‹' => [
                'description' => 'Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ Ð²ÑÐµ Ñ…Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð´Ð¾ 24 Ð½Ð° 1 Ñ‡Ð°Ñ',
                'rarity' => 'ÐžÑ‡ÐµÐ½ÑŒ Ñ€ÐµÐ´ÐºÐ¾Ðµ',
                'type' => 'Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ðµ',
                'value' => '50000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ']
            ]
        ],
        'legendary' => [
            'Ð—ÐµÐ»ÑŒÐµ Ð²ÐµÑ‡Ð½Ð¾Ð¹ Ð¶Ð¸Ð·Ð½Ð¸' => [
                'description' => 'Ð”ÐµÐ»Ð°ÐµÑ‚ ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾ Ð±ÐµÑÑÐ¼ÐµÑ€Ñ‚Ð½Ñ‹Ð¼ (Ð½Ðµ ÑÑ‚Ð°Ñ€ÐµÐµÑ‚, Ð½Ðµ ÑƒÐ¼Ð¸Ñ€Ð°ÐµÑ‚ Ð¾Ñ‚ ÑÑ‚Ð°Ñ€Ð¾ÑÑ‚Ð¸)',
                'rarity' => 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ',
                'type' => 'Ð¢Ñ€Ð°Ð½ÑÐ¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ',
                'value' => '100000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ', 'Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ð¾Ð³Ð¾ Ð¼Ð¾Ð³ÑƒÑ‰ÐµÑÑ‚Ð²Ð°' => [
                'description' => 'Ð”Ð°ÐµÑ‚ 20 ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð²Ð¾ Ð²ÑÐµÑ… ÐºÐ»Ð°ÑÑÐ°Ñ… Ð½Ð° 24 Ñ‡Ð°ÑÐ°',
                'rarity' => 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ',
                'type' => 'Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ðµ',
                'value' => '100000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ', 'Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð¸Ñ' => [
                'description' => 'ÐŸÐ¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð»ÑŽÐ±Ð¾Ð¹ Ð½ÐµÐ¶Ð¸Ð²Ð¾Ð¹ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð¾Ð¼ Ð´Ð¾ 10x10x10 Ñ„ÑƒÑ‚Ð¾Ð²',
                'rarity' => 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ',
                'type' => 'Ð¢Ñ€Ð°Ð½ÑÐ¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ',
                'value' => '100000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ', 'Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸' => [
                'description' => 'ÐŸÐ¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ Ð²Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ð° 1d100 Ð»ÐµÑ‚ Ð½Ð°Ð·Ð°Ð´ Ð¸Ð»Ð¸ Ð²Ð¿ÐµÑ€ÐµÐ´',
                'rarity' => 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ',
                'type' => 'ÐŸÑ€Ð¾Ñ€Ð¸Ñ†Ð°Ð½Ð¸Ðµ',
                'value' => '100000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ', 'Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ']
            ],
            'Ð—ÐµÐ»ÑŒÐµ ÑÑƒÐ´ÑŒÐ±Ñ‹' => [
                'description' => 'ÐŸÐ¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð»ÑŽÐ±Ð¾Ð³Ð¾ Ð±Ñ€Ð¾ÑÐºÐ° ÐºÐ¾ÑÑ‚ÐµÐ¹ Ð² Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ð¼ Ð¸Ð»Ð¸ Ð±ÑƒÐ´ÑƒÑ‰ÐµÐ¼',
                'rarity' => 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ',
                'type' => 'ÐŸÑ€Ð¾Ñ€Ð¸Ñ†Ð°Ð½Ð¸Ðµ',
                'value' => '100000 Ð·Ð¾Ð»Ð¾Ñ‚Ñ‹Ñ…',
                'weight' => '0.5 Ñ„ÑƒÐ½Ñ‚Ð°',
                'properties' => ['ÐŸÐ¸Ñ‚ÑŒÐµ', 'ÐœÐ°Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ', 'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ', 'Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ']
            ]
        ]
    ];

    private $potionTypes = [
        'Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ' => 'ðŸ©¹',
        'Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ðµ' => 'ðŸ’ª',
        'Ð—Ð°Ñ‰Ð¸Ñ‚Ð°' => 'ðŸ›¡ï¸',
        'Ð˜Ð»Ð»ÑŽÐ·Ð¸Ñ' => 'ðŸ‘ï¸',
        'Ð¢Ñ€Ð°Ð½ÑÐ¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ' => 'ðŸ”„',
        'ÐÐµÐºÑ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸Ñ' => 'ðŸ’€',
        'ÐŸÑ€Ð¾Ñ€Ð¸Ñ†Ð°Ð½Ð¸Ðµ' => 'ðŸ”®'
    ];

    private $rarityColors = [
        'ÐžÐ±Ñ‹Ñ‡Ð½Ð¾Ðµ' => '#9b9b9b',
        'ÐÐµÐ¾Ð±Ñ‹Ñ‡Ð½Ð¾Ðµ' => '#4caf50',
        'Ð ÐµÐ´ÐºÐ¾Ðµ' => '#2196f3',
        'ÐžÑ‡ÐµÐ½ÑŒ Ñ€ÐµÐ´ÐºÐ¾Ðµ' => '#9c27b0',
        'Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ðµ' => '#ff9800'
    ];

    public function generateRandomPotion($rarity = null, $type = null) {
        $availablePotions = [];
        
        // Ð•ÑÐ»Ð¸ ÑƒÐºÐ°Ð·Ð°Ð½Ð° Ñ€ÐµÐ´ÐºÐ¾ÑÑ‚ÑŒ, Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð¿Ð¾ Ð½ÐµÐ¹
        if ($rarity && isset($this->potions[$rarity])) {
            $availablePotions = $this->potions[$rarity];
        } else {
            // Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð²ÑÐµ Ð·ÐµÐ»ÑŒÑ
            foreach ($this->potions as $rarityPotions) {
                $availablePotions = array_merge($availablePotions, $rarityPotions);
            }
        }
        
        // Ð•ÑÐ»Ð¸ ÑƒÐºÐ°Ð·Ð°Ð½ Ñ‚Ð¸Ð¿, Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð¿Ð¾ Ð½ÐµÐ¼Ñƒ
        if ($type) {
            $filteredPotions = [];
            foreach ($availablePotions as $name => $data) {
                if ($data['type'] === $type) {
                    $filteredPotions[$name] = $data;
                }
            }
            $availablePotions = $filteredPotions;
        }
        
        // Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ñ… Ð·ÐµÐ»Ð¸Ð¹ Ð¿Ð¾ÑÐ»Ðµ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ð¸, Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ðµ
        if (empty($availablePotions)) {
            $rarityKey = array_rand($this->potions);
            $availablePotions = $this->potions[$rarityKey];
        }
        
        $potionName = array_rand($availablePotions);
        $potionData = $availablePotions[$potionName];
        
        return [
            'name' => $potionName,
            'description' => $potionData['description'],
            'rarity' => $potionData['rarity'],
            'type' => $potionData['type'],
            'value' => $potionData['value'],
            'weight' => $potionData['weight'],
            'properties' => $potionData['properties'],
            'icon' => $this->potionTypes[$potionData['type']] ?? 'ðŸ§ª',
            'color' => $this->rarityColors[$potionData['rarity']] ?? '#9b9b9b'
        ];
    }

    public function generateMultiplePotions($count = 1, $rarity = null, $type = null) {
        $potions = [];
        for ($i = 0; $i < $count; $i++) {
            $potions[] = $this->generateRandomPotion($rarity, $type);
        }
        return $potions;
    }

    public function getPotionByType($type) {
        $foundPotions = [];
        foreach ($this->potions as $rarity => $rarityPotions) {
            foreach ($rarityPotions as $name => $data) {
                if ($data['type'] === $type) {
                    $foundPotions[] = [
                        'name' => $name,
                        'description' => $data['description'],
                        'rarity' => $data['rarity'],
                        'type' => $data['type'],
                        'value' => $data['value'],
                        'weight' => $data['weight'],
                        'properties' => $data['properties'],
                        'icon' => $this->potionTypes[$data['type']] ?? 'ðŸ§ª',
                        'color' => $this->rarityColors[$data['rarity']] ?? '#9b9b9b'
                    ];
                }
            }
        }
        return $foundPotions;
    }

    public function getAvailableRarities() {
        return array_keys($this->potions);
    }

    public function getAvailableTypes() {
        return array_keys($this->potionTypes);
    }
}

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²
$generator = new PotionGenerator();

$action = $_GET['action'] ?? 'random';
$count = (int)($_GET['count'] ?? 1);
$rarity = $_GET['rarity'] ?? null;
$type = $_GET['type'] ?? null;

try {
    switch ($action) {
        case 'random':
            if ($count > 10) $count = 10; // ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾
            $result = $generator->generateMultiplePotions($count, $rarity, $type);
            break;
            
        case 'by_type':
            if (!$type) {
                throw new Exception('Ð¢Ð¸Ð¿ Ð·ÐµÐ»ÑŒÑ Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½');
            }
            $result = $generator->getPotionByType($type);
            break;
            
        case 'rarities':
            $result = $generator->getAvailableRarities();
            break;
            
        case 'types':
            $result = $generator->getAvailableTypes();
            break;
            
        default:
            throw new Exception('ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ');
    }
    
    echo json_encode([
        'success' => true,
        'data' => $result,
        'timestamp' => date('Y-m-d H:i:s')
    ], JSON_UNESCAPED_UNICODE);
    
} catch (Exception $e) {
    http_response_code(400);
    echo json_encode([
        'success' => false,
        'error' => $e->getMessage(),
        'timestamp' => date('Y-m-d H:i:s')
    ], JSON_UNESCAPED_UNICODE);
}
?>
