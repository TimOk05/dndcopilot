<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ccc;
        }
        
        .success {
            color: green;
        }
        
        .error {
            color: red;
        }
        
        .info {
            color: blue;
        }
        
        .debug {
            background: #f0f0f0;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
        }
    </style>
</head>

<body>
    <h1>üîç –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π</h1>

    <div class="test-section">
        <h2>–¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π</h2>
        <div id="function-test"></div>
        <button onclick="testFunctions()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏</button>
    </div>

    <div class="test-section">
        <h2>–¢–µ—Å—Ç 2: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞</h2>
        <select id="languageSelector" onchange="changeLanguage()">
            <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
            <option value="en">üá∫üá∏ English</option>
        </select>
        <button onclick="testChangeLanguage()">–¢–µ—Å—Ç —Å–º–µ–Ω—ã —è–∑—ã–∫–∞</button>
    </div>

    <div class="test-section">
        <h2>–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        <div id="debug-info" class="debug"></div>
    </div>

    <script>
        // –°–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤
        const interfaceTranslations = {
            'ru': {
                'welcome': '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å',
                'logout': 'üö™ –í—ã–π—Ç–∏',
                'test': '–¢–µ—Å—Ç'
            },
            'en': {
                'welcome': 'Welcome',
                'logout': 'üö™ Logout',
                'test': 'Test'
            }
        };

        let currentLanguage = 'ru';

        function t(key) {
            return interfaceTranslations[currentLanguage] ? .[key] || interfaceTranslations['ru'][key] || key;
        }

        function log(message) {
            const debugDiv = document.getElementById('debug-info');
            const timestamp = new Date().toLocaleTimeString();
            debugDiv.innerHTML += `[${timestamp}] ${message}<br>`;
            console.log(message);
        }

        function updateLanguageSelector() {
            const selector = document.getElementById('languageSelector');
            if (selector) {
                selector.value = currentLanguage;
                log(`–°–µ–ª–µ–∫—Ç–æ—Ä —è–∑—ã–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞: ${currentLanguage}`);
            } else {
                log('–û–®–ò–ë–ö–ê: –°–µ–ª–µ–∫—Ç–æ—Ä —è–∑—ã–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω');
            }
        }

        function changeLanguage() {
            const selector = document.getElementById('languageSelector');
            if (selector) {
                currentLanguage = selector.value;
                log(`–Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞: ${currentLanguage}`);
                updateLanguageSelector();
            }
        }

        function testFunctions() {
            const testDiv = document.getElementById('function-test');
            testDiv.innerHTML = '';

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π
            const functions = [
                'changeLanguage',
                'updateLanguageSelector',
                't'
            ];

            functions.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    testDiv.innerHTML += `<div class="success">‚úÖ –§—É–Ω–∫—Ü–∏—è ${funcName} –¥–æ—Å—Ç—É–ø–Ω–∞</div>`;
                    log(`–§—É–Ω–∫—Ü–∏—è ${funcName} –¥–æ—Å—Ç—É–ø–Ω–∞`);
                } else {
                    testDiv.innerHTML += `<div class="error">‚ùå –§—É–Ω–∫—Ü–∏—è ${funcName} –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</div>`;
                    log(`–§—É–Ω–∫—Ü–∏—è ${funcName} –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞`);
                }
            });
        }

        function testChangeLanguage() {
            log('=== –¢–ï–°–¢ –°–ú–ï–ù–´ –Ø–ó–´–ö–ê ===');
            log(`–¢–µ–∫—É—â–∏–π —è–∑—ã–∫: ${currentLanguage}`);
            log(`–ü–µ—Ä–µ–≤–æ–¥ "welcome": ${t('welcome')}`);
            log(`–ü–µ—Ä–µ–≤–æ–¥ "logout": ${t('logout')}`);

            // –ú–µ–Ω—è–µ–º —è–∑—ã–∫
            currentLanguage = currentLanguage === 'ru' ? 'en' : 'ru';
            log(`–Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞: ${currentLanguage}`);
            log(`–ù–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥ "welcome": ${t('welcome')}`);
            log(`–ù–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥ "logout": ${t('logout')}`);

            updateLanguageSelector();
        }

        // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏
        window.changeLanguage = changeLanguage;
        window.updateLanguageSelector = updateLanguageSelector;
        window.testFunctions = testFunctions;
        window.testChangeLanguage = testChangeLanguage;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –Ω–∞—á–∏–Ω–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é');

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —è–∑—ã–∫ –∏–∑ URL
            const urlParams = new URLSearchParams(window.location.search);
            const urlLang = urlParams.get('lang');
            if (urlLang) {
                currentLanguage = urlLang;
                log(`–Ø–∑—ã–∫ –∏–∑ URL: ${currentLanguage}`);
            }

            updateLanguageSelector();
            testFunctions();

            log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
        });
    </script>
</body>

</html>