{
  "metadata": {
    "version": "2.2-wizard",
    "locale": "ru",
    "notes": [
      "Структура согласована с bard.json для генератора персонажей.",
      "Заклинания берутся из внешнего словаря; здесь указаны только количества и слоты.",
      "Субклассы включают классические школы PHB; при необходимости можно добавить варианты из XGE/TCE/EGW отдельным патчем."
    ],
    "last_updated": "2025-09-20"
  },
  "class": {
    "id": "wizard",
    "name": {
      "ru": "Волшебник",
      "en": "Wizard"
    },
    "hit_die": "d6",
    "primary_abilities": ["Интеллект"],
    "saving_throws": ["Интеллект", "Мудрость"],
    "armor_proficiencies": [],
    "weapon_proficiencies": ["Кинжалы", "Дротики", "Пращи", "Посохи", "Лёгкие арбалеты"],
    "tool_proficiencies": [],
    "skill_proficiencies": {
      "choose": 2,
      "options": ["История", "Проницательность", "Магия", "Медицина", "Религия", "Анализ"]
    },
    "starting_equipment": {
      "choices": [
        {"choose": 1, "options": ["Боевой посох", "Кинжал"]},
        {"choose": 1, "options": ["Мешочек с компонентами", "Магическая фокусировка"]},
        {"choose": 1, "options": ["Набор учёного", "Набор путешественника"]}
      ],
      "fixed": ["Книга заклинаний"]
    },
    "multiclassing": {
      "prerequisites": {"Интеллект": 13},
      "proficiencies_gained": ["Нет"]
    },
    "spellcasting": {
      "ability": "Интеллект",
      "save_dc_formula": "8 + бонус мастерства + модификатор Интеллекта",
      "attack_bonus_formula": "бонус мастерства + модификатор Интеллекта",
      "ritual_casting": true,
      "focus": "Арканум (жезл, посох, кристалл, сфера) или мешочек компонентов",
      "external_spell_list": true,
      "spell_list_ref": "spell_lists.wizard",
      "spellbook_rules": "На 1-м уровне книга содержит 6 заклинаний 1 уровня. На каждом новом уровне добавляйте 2 заклинания из списка волшебника, которые можете подготавливать. Переписывание найденных заклинаний: 2 часа и 50 зм за уровень (замена своей книги: 1 час и 10 зм за уровень).",
      "cantrips_known_progression": {
        "1": 3, "2": 3, "3": 3,
        "4": 4, "5": 4, "6": 4, "7": 4, "8": 4, "9": 4,
        "10": 5, "11": 5, "12": 5, "13": 5, "14": 5, "15": 5, "16": 5, "17": 5, "18": 5, "19": 5, "20": 5
      },
      "spells_prepared_formula": "уровень волшебника + модификатор Интеллекта (минимум 1)",
      "spell_slots_progression": {
        "1":  {"lvl1": 2, "lvl2": 0, "lvl3": 0, "lvl4": 0, "lvl5": 0, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "2":  {"lvl1": 3, "lvl2": 0, "lvl3": 0, "lvl4": 0, "lvl5": 0, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "3":  {"lvl1": 4, "lvl2": 2, "lvl3": 0, "lvl4": 0, "lvl5": 0, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "4":  {"lvl1": 4, "lvl2": 3, "lvl3": 0, "lvl4": 0, "lvl5": 0, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "5":  {"lvl1": 4, "lvl2": 3, "lvl3": 2, "lvl4": 0, "lvl5": 0, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "6":  {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 0, "lvl5": 0, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "7":  {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 1, "lvl5": 0, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "8":  {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 2, "lvl5": 0, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "9":  {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 1, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "10": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 2, "lvl6": 0, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "11": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 2, "lvl6": 1, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "12": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 2, "lvl6": 1, "lvl7": 0, "lvl8": 0, "lvl9": 0},
        "13": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 2, "lvl6": 1, "lvl7": 1, "lvl8": 0, "lvl9": 0},
        "14": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 2, "lvl6": 1, "lvl7": 1, "lvl8": 0, "lvl9": 0},
        "15": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 2, "lvl6": 1, "lvl7": 1, "lvl8": 1, "lvl9": 0},
        "16": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 2, "lvl6": 1, "lvl7": 1, "lvl8": 1, "lvl9": 0},
        "17": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 2, "lvl6": 1, "lvl7": 1, "lvl8": 1, "lvl9": 1},
        "18": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 3, "lvl6": 1, "lvl7": 1, "lvl8": 1, "lvl9": 1},
        "19": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 3, "lvl6": 2, "lvl7": 1, "lvl8": 1, "lvl9": 1},
        "20": {"lvl1": 4, "lvl2": 3, "lvl3": 3, "lvl4": 3, "lvl5": 3, "lvl6": 2, "lvl7": 2, "lvl8": 1, "lvl9": 1}
      }
    },
    "class_features": [
      {"name": "Книга заклинаний", "level": 1, "description": "Ваша личная книга со списком заклинаний. Потеряв её, можете восстановить записав подготовленные заклинания в новую книгу."},
      {"name": "Подготовка и сотворение заклинаний", "level": 1, "description": "Готовите список заклинаний из книги: Инт + уровень. Колдуете тратя ячейки соответствующего уровня."},
      {"name": "Магическое восстановление", "level": 1, "description": "Во время короткого отдыха восстанавливаете ячейки суммарным уровнем до половины уровня волшебника (не выше 5 уровня ячеек)."},
      {"name": "Магическая традиция", "level": 2, "description": "Выбор школы волшебства (архетипа), даёт умения на 2, 6, 10 и 14 уровнях."},
      {"name": "Формулы заговоров (TCE)", "level": 3, "description": "После продолжительного отдыха можно заменить один известный заговор на другой из списка волшебника."},
      {"name": "Увеличение характеристик", "level": 4, "description": "На 4, 8, 12, 16 и 19 уровнях."},
      {"name": "Мастерство заклинателя", "level": 18, "description": "Выберите заклинания 1 и 2 уровня. Можно колдовать их без траты ячеек, если подготовлены (без повышения уровня)."},
      {"name": "Фирменное заклинание", "level": 20, "description": "Выберите два заклинания 3-го уровня в книге — всегда подготовлены и 1/к. или п/п. отдых бесплатно."}
    ],
    "subclasses": [
      {
        "name": "Школа воплощения",
        "features": [
          {"name": "Мастер воплощения", "level": 2, "description": "Копирование заклинаний Воплощения стоит вполовину дешевле по времени и золоту."},
          {"name": "Построение заклинаний", "level": 2, "description": "Создаёте безопасные зоны в области заклинаний Воплощения."},
          {"name": "Мощный заговор", "level": 6, "description": "Цели, спасшиеся от вашего заговора урона, получают половину урона."},
          {"name": "Усиленное воплощение", "level": 10, "description": "Добавляете модификатор Интеллекта к одному броску урона заклинания Воплощения."},
          {"name": "Перегрузка", "level": 14, "description": "Один раз без вреда максимизируете урон заклинания ≤5 уровня; дальнейшие использования до отдыха наносят вам нарастающий некротический урон."}
        ]
      },
      {
        "name": "Школа вызова",
        "features": [
          {"name": "Мастер созидания", "level": 2, "description": "Копирование заклинаний Вызова дешевле вдвое."},
          {"name": "Малый вызов", "level": 2, "description": "Действием создаёте малый немагический предмет на 1 час."},
          {"name": "Безопасное перемещение", "level": 6, "description": "Действием телепорт на 30 фт; можно меняться местами с согласной целью. Перезарядка по условиям."},
          {"name": "Фокусированный вызов", "level": 10, "description": "Концентрация на заклинаниях Вызова не прерывается от урона."},
          {"name": "Надёжный призыв", "level": 14, "description": "Призванные/созданные существами Вызова получают 30 временных хитов."}
        ]
      },
      {
        "name": "Школа иллюзии",
        "features": [
          {"name": "Мастер иллюзий", "level": 2, "description": "Копирование Иллюзий дешевле вдвое."},
          {"name": "Улучшенная Малая иллюзия", "level": 2, "description": "Заговор «Малая иллюзия» и одновременный звук+изображение."},
          {"name": "Пластичные иллюзии", "level": 6, "description": "Можно действием изменять длительную иллюзию."},
          {"name": "Собственная иллюзорность", "level": 10, "description": "Реакцией создаёте иллюзорную копию, атака промахивается."},
          {"name": "Иллюзорная реальность", "level": 14, "description": "Делаете часть иллюзии материальной."}
        ]
      },
      {
        "name": "Школа некромантии",
        "features": [
          {"name": "Ученик некромантии", "level": 2, "description": "Бонус к урону заклинаний некромантии."},
          {"name": "Создание нежити", "level": 6, "description": "Усиленное поднятие мертвецов."},
          {"name": "Усиление нежити", "level": 10, "description": "Ваши нежити получают бонусы к атакам и хп."},
          {"name": "Мастер нежити", "level": 14, "description": "Снимает часть ограничений контроля над нежитью."}
        ]
      },
      {
        "name": "Школа прорицания",
        "features": [
          {"name": "Пророческие броски", "level": 2, "description": "Бросаете 2к20 после отдыха и можете подменять ими броски."},
          {"name": "Видение", "level": 6, "description": "Получаете доп. использование пророческих костей."},
          {"name": "Усиленные предсказания", "level": 10, "description": "Сильнее влияете на исход событий прорицанием."},
          {"name": "Верховное прорицание", "level": 14, "description": "Три кости предсказания."}
        ]
      },
      {
        "name": "Школа очарования",
        "features": [
          {"name": "Очарователь", "level": 2, "description": "Сложнее сопротивляться вашим очарованиям."},
          {"name": "Убедительный", "level": 6, "description": "Повышает шансы очарования."},
          {"name": "Магия господства", "level": 10, "description": "Усиленные эффекты контроля разума."},
          {"name": "Неодолимое очарование", "level": 14, "description": "Почти полное подчинение цели."}
        ]
      },
      {
        "name": "Школа ограждения",
        "features": [
          {"name": "Охранные печати", "level": 2, "description": "Усиленные защитные заклинания."},
          {"name": "Магический барьер", "level": 6, "description": "Сильные щиты/ауры."},
          {"name": "Защита союзников", "level": 10, "description": "Делитесь защитой."},
          {"name": "Мастер защиты", "level": 14, "description": "Максимальная оборонительная магия."}
        ]
      },
      {
        "name": "Школа преобразования",
        "features": [
          {"name": "Алхимик", "level": 2, "description": "Создание мелких магических эффектов/эликсиров."},
          {"name": "Метаморф", "level": 6, "description": "Усиленные превращения."},
          {"name": "Постоянная трансмутация", "level": 10, "description": "Часть превращений делает постоянной."},
          {"name": "Философский камень", "level": 14, "description": "Камень с сильными эффектами."}
        ]
      }
    ],
    "randomization": {
      "enabled": true,
      "fields": {
        "spellbook_appearance": {"source": "random_tables.книга_заклинаний"},
        "ambition": {"source": "random_tables.амбиция"},
        "quirk": {"source": "random_tables.эксцентричность"}
      }
    },
    "random_tables": {
      "книга_заклинаний": {"dice": "d6", "entries": [
        "Металлические страницы, текст вытравлен кислотой",
        "Полоски кожи, обёрнутые вокруг посоха",
        "Истёртый том с пиктограммами",
        "Камушки с рунами в сумке",
        "Обгоревшая книга с едва видимыми буквами",
        "Чёрные страницы, видимые только в темноте"
      ]},
      "амбиция": {"dice": "d6", "entries": [
        "Доказать ограниченность богов",
        "Достичь бессмертия",
        "Сделать магию доступной всем",
        "Защищать дорогих силой магии",
        "Лишать злоупотребляющих магией",
        "Стать величайшим волшебником эпохи"
      ]},
      "эксцентричность": {"dice": "d6", "entries": [
        "Навязчиво постукивает ногой",
        "Притворная рассеянность",
        "Сначала смотрит на потолок",
        "Дорожит мёртвым червём во флаконе",
        "Разговаривает с собой, чтобы отстали",
        "Одевается так, что его принимают за бедняка"
      ]}
    }
  }
}
