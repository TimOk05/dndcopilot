<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#7209b7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="DnD Chat">
    <title>DnD AI</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="utilities.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
    <!-- –°–µ–ª–µ–∫—Ç–æ—Ä —è–∑—ã–∫–∞ -->
    <div class="language-selector">
        <select id="languageSelector" onchange="changeLanguage()">
            <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
            <option value="en">üá∫üá∏ English</option>
        </select>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="text-center mt-4 mb-5">
            <h1 style="color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">üé≤ D&D AI Copilot</h1>
            <p style="color: rgba(255,255,255,0.9); font-size: 1.2em;">–í–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ –º–∏—Ä–µ Dungeons & Dragons</p>
        </header>

        <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
        <div class="card text-center">
            <h2>
                <span class="welcome-text" data-welcome-ru="–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å" data-welcome-en="Welcome">
                    <?php echo ($currentLanguage === 'en' ? 'Welcome' : '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å'); ?> 
                    <?php echo htmlspecialchars($currentUser); ?>!
                </span>
            </h2>
            <div class="mt-3">
                <button class="logout-btn btn btn-secondary" onclick="logout()" data-logout-ru="üö™ –í—ã–π—Ç–∏" data-logout-en="üö™ Logout">
                    <?php echo ($currentLanguage === 'en' ? 'üö™ Logout' : 'üö™ –í—ã–π—Ç–∏'); ?>
                </button>
                <?php if (isAdmin()): ?>
                <a href="admin.php" class="btn btn-secondary">‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a>
                <a href="stats.php" class="btn btn-secondary">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
                <?php endif; ?>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ -->
        <div class="row" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">

            <!-- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π -->
            <div class="card">
                <h3>üé≠ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π</h3>
                <p>–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º D&D API –∏ AI</p>
                <button class="btn" data-modal="character">üé≤ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</button>
            </div>

            <!-- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤ -->
            <div class="card">
                <h3>üëπ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤</h3>
                <p>–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤ –¥–ª—è –≤–∞—à–µ–π –≥—Ä—É–ø–ø—ã</p>
                <button class="btn" data-modal="enemy">‚öîÔ∏è –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤</button>
            </div>

            <!-- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–µ–ª–∏–π -->
            <div class="card">
                <h3>üß™ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–µ–ª–∏–π</h3>
                <p>–°–æ–∑–¥–∞–π—Ç–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ –∑–µ–ª—å—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏ —Ä–µ–¥–∫–æ—Å—Ç–∏</p>
                <button class="btn" data-modal="potion">‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–µ–ª—å—è</button>
            </div>

            <!-- –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ -->
            <div class="card">
                <h3>‚ö° –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞</h3>
                <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–æ—Ä—è–¥–∫–æ–º —Ö–æ–¥–æ–≤ –≤ –±–æ—é</p>
                <button class="btn" onclick="openInitiative()">üéØ –û—Ç–∫—Ä—ã—Ç—å –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É</button>
            </div>

            <!-- –ó–∞–º–µ—Ç–∫–∏ -->
            <div class="card">
                <h3>üìù –ó–∞–º–µ—Ç–∫–∏</h3>
                <p>–í–µ–¥–∏—Ç–µ –∑–∞–ø–∏—Å–∏ –æ –≤–∞—à–∏—Ö –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è—Ö</p>
                <button class="btn" onclick="openNotes()">üìñ –û—Ç–∫—Ä—ã—Ç—å –∑–∞–º–µ—Ç–∫–∏</button>
            </div>

            <!-- –ö–æ—Å—Ç–∏ -->
            <div class="card">
                <h3>üé≤ –ö–æ—Å—Ç–∏</h3>
                <p>–ë—Ä–æ—Å–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ—Å—Ç–∏</p>
                <button class="btn" onclick="openDice()">üé≤ –ë—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π -->
    <div id="character-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <?php echo ($currentLanguage === 'en' ? 'üé≠ Character Generator' : 'üé≠ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π'); ?>
                </h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="character-form">
                    <div class="form-group">
                        <label for="race"><?php echo ($currentLanguage === 'en' ? 'Race:' : '–†–∞—Å–∞:'); ?></label>
                        <select id="race" name="race" class="form-control">
                            <option value=""><?php echo ($currentLanguage === 'en' ? 'Any' : '–õ—é–±–∞—è'); ?></option>
                            <option value="human"><?php echo ($currentLanguage === 'en' ? 'Human' : '–ß–µ–ª–æ–≤–µ–∫'); ?></option>
                            <option value="elf"><?php echo ($currentLanguage === 'en' ? 'Elf' : '–≠–ª—å—Ñ'); ?></option>
                            <option value="dwarf"><?php echo ($currentLanguage === 'en' ? 'Dwarf' : '–î–≤–∞—Ä—Ñ'); ?></option>
                            <option value="halfling"><?php echo ($currentLanguage === 'en' ? 'Halfling' : '–•–æ–±–±–∏—Ç'); ?></option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="class"><?php echo ($currentLanguage === 'en' ? 'Class:' : '–ö–ª–∞—Å—Å:'); ?></label>
                        <select id="class" name="class" class="form-control">
                            <option value=""><?php echo ($currentLanguage === 'en' ? 'Any' : '–õ—é–±–æ–π'); ?></option>
                            <option value="fighter"><?php echo ($currentLanguage === 'en' ? 'Fighter' : '–í–æ–∏–Ω'); ?></option>
                            <option value="wizard"><?php echo ($currentLanguage === 'en' ? 'Wizard' : '–ú–∞–≥'); ?></option>
                            <option value="rogue"><?php echo ($currentLanguage === 'en' ? 'Rogue' : '–ü–ª—É—Ç'); ?></option>
                            <option value="cleric"><?php echo ($currentLanguage === 'en' ? 'Cleric' : '–ñ—Ä–µ—Ü'); ?></option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="level"><?php echo ($currentLanguage === 'en' ? 'Level:' : '–£—Ä–æ–≤–µ–Ω—å:'); ?></label>
                        <select id="level" name="level" class="form-control">
                            <option value=""><?php echo ($currentLanguage === 'en' ? 'Any' : '–õ—é–±–æ–π'); ?></option>
                            <?php for ($i = 1; $i <= 20; $i++): ?>
                                <option value="<?php echo $i; ?>"><?php echo $i; ?></option>
                            <?php endfor; ?>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="gender"><?php echo ($currentLanguage === 'en' ? 'Gender:' : '–ü–æ–ª:'); ?></label>
                        <select id="gender" name="gender" class="form-control">
                            <option value=""><?php echo ($currentLanguage === 'en' ? 'Any' : '–õ—é–±–æ–π'); ?></option>
                            <option value="male"><?php echo ($currentLanguage === 'en' ? 'Male' : '–ú—É–∂—Å–∫–æ–π'); ?></option>
                            <option value="female"><?php echo ($currentLanguage === 'en' ? 'Female' : '–ñ–µ–Ω—Å–∫–∏–π'); ?></option>
                        </select>
                    </div>

                    <div class="loading" id="character-loading">
                        <div class="loading-spinner"></div>
                        <p>
                            <?php echo ($currentLanguage === 'en' ? 'Generating character...' : '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞...'); ?>
                        </p>
                    </div>

                    <div class="result" id="character-result" style="display: none;"></div>

                    <button type="submit" class="generate-btn btn btn-success">
                        <?php echo ($currentLanguage === 'en' ? 'üé≤ Generate Character' : 'üé≤ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞'); ?>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤ -->
    <div id="enemy-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <?php echo ($currentLanguage === 'en' ? 'üëπ Enemy Generator' : 'üëπ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤'); ?>
                </h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="enemy-form">
                    <div class="form-group">
                        <label for="count"><?php echo ($currentLanguage === 'en' ? 'Count:' : '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:'); ?></label>
                        <input type="number" id="count" name="count" class="form-control" min="1" max="10" value="1">
                    </div>

                    <div class="form-group">
                        <label for="difficulty"><?php echo ($currentLanguage === 'en' ? 'Difficulty:' : '–°–ª–æ–∂–Ω–æ—Å—Ç—å:'); ?></label>
                        <select id="difficulty" name="difficulty" class="form-control">
                            <option value="easy"><?php echo ($currentLanguage === 'en' ? 'Easy' : '–õ–µ–≥–∫–∞—è'); ?></option>
                            <option value="medium"><?php echo ($currentLanguage === 'en' ? 'Medium' : '–°—Ä–µ–¥–Ω—è—è'); ?></option>
                            <option value="hard"><?php echo ($currentLanguage === 'en' ? 'Hard' : '–°–ª–æ–∂–Ω–∞—è'); ?></option>
                        </select>
                    </div>

                    <div class="loading" id="enemy-loading">
                        <div class="loading-spinner"></div>
                        <p>
                            <?php echo ($currentLanguage === 'en' ? 'Generating enemies...' : '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤...'); ?>
                        </p>
                    </div>

                    <div class="result" id="enemy-result" style="display: none;"></div>

                    <button type="submit" class="btn btn-success">
                        <?php echo ($currentLanguage === 'en' ? '‚öîÔ∏è Generate Enemies' : '‚öîÔ∏è –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤'); ?>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –∑–µ–ª–∏–π -->
    <div id="potion-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <?php echo ($currentLanguage === 'en' ? 'üß™ Potion Generator' : 'üß™ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–µ–ª–∏–π'); ?>
                </h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="potion-form">
                    <div class="form-group">
                        <label for="count"><?php echo ($currentLanguage === 'en' ? 'Count:' : '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:'); ?></label>
                        <input type="number" id="count" name="count" class="form-control" min="1" max="10" value="1">
                    </div>

                    <div class="loading" id="potion-loading">
                        <div class="loading-spinner"></div>
                        <p>
                            <?php echo ($currentLanguage === 'en' ? 'Generating potions...' : '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–µ–ª–∏–π...'); ?>
                        </p>
                    </div>

                    <div class="result" id="potion-result" style="display: none;"></div>

                    <button type="submit" class="btn btn-success">
                        <?php echo ($currentLanguage === 'en' ? '‚ú® Generate Potions' : '‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–µ–ª—å—è'); ?>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- JavaScript –º–æ–¥—É–ª–∏ -->
    <script src="js/language.js"></script>
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>

    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ -->
    <script>
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        function logout() {
            if (confirm('<?php echo ($currentLanguage === '
                    en ' ? '
                    Are you sure you want to logout ? ' : '
                    –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏ ? '); ?>')) {
                window.location.href = 'logout.php';
            }
        }

        function openInitiative() {
            window.open('combat.html', '_blank');
        }

        function openNotes() {
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∑–∞–º–µ—Ç–æ–∫
            alert('<?php echo ($currentLanguage === '
                en ' ? '
                Notes feature coming soon!' : '
                –§—É–Ω–∫—Ü–∏—è –∑–∞–º–µ—Ç–æ–∫ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞!'); ?>');
        }

        function openDice() {
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ—Å—Ç–µ–π
            alert('<?php echo ($currentLanguage === '
                en ' ? '
                Dice feature coming soon!' : '
                –§—É–Ω–∫—Ü–∏—è –∫–æ—Å—Ç–µ–π —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞!'); ?>');
        }
    </script>

    <!-- JavaScript –º–æ–¥—É–ª–∏ -->
    <script src="js/language.js"></script>
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>

</html>